# СЕКА - Карточная игра в Telegram

## Описание
СЕКА - это карточная игра, реализованная как Telegram Mini App. Игра позволяет пользователям играть в карты прямо в Telegram, используя WebSocket для реального времени взаимодействия.

## Правила игры

### Общие правила
- Игра ведется колодой из 21 карты (4 туза, 4 короля, 4 дамы, 4 валета, 4 десятки, 1 девятка треф)
- Участвуют от 2 до 10 игроков
- Каждому игроку раздается по 3 карты
- Цель игры - набрать наибольшее количество очков
- Девятка треф всегда является джокером

### Значения карт
- Туз = 11 очков
- Валет, Дама, Король, Десятка = 10 очков
- Девятка треф = джокер (может быть любой картой по желанию игрока)

### Подсчет очков
- Очки считаются только при одинаковых мастях
- Примеры комбинаций:
  - Туз пик + Король пик = 21 очко
  - Два туза ("Два Лба") = 22 очка
  - Валет + Дама + Туз одной масти = 31 очко
  - Дама пик + Туз пик + Джокер (девятка треф) = 32 очка
  - Три одинаковые карты (от десяток до тузов)
  - Три десятки - самая старшая комбинация (старше трех тузов!)

### Ход игры
1. **Определение дилера** - выбирается раздающий
2. **Начальные ставки** - все игроки делают равные ставки
3. **Раздача карт** - каждому игроку раздается по 3 карты
4. **Торги** - игроки по очереди делают ставки или пасуют
5. **Вскрытие карт** - подсчет очков и определение победителя

### Особые правила
- При равных очках у игроков есть два варианта:
  1. **Поделить банк** - разделить выигрыш поровну
  2. **Свара** - оставить деньги в банке и играть следующую игру только между победителями
- Для участия в "Сваре" проигравшие должны внести половину банка
- "Свара" играется только при согласии всех победителей
- При "Сваре" все игроки могут присоединиться, внеся равную долю от банка

### Ставки
- Минимальная ставка: 100
- Максимальная ставка: 2000
- Игрок может:
  - Сделать ставку
  - Уравнять ставку
  - Пасовать (сбросить карты)

## Технологии
- Frontend: React + TypeScript
- Backend: Python + FastAPI
- WebSocket для реального времени
- Telegram Mini App API

## Установка и запуск

### Frontend
```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build
```

### Backend
```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск сервера
uvicorn main:app --reload
```

## Структура проекта

### Frontend
- `pages/gameplay/` - основные компоненты игры
  - `components/` - UI компоненты
  - `store/` - управление состоянием
  - `types/` - TypeScript типы

### Backend
- `main.py` - основной файл сервера
- `game.py` - игровая логика
- `websocket.py` - WebSocket обработчики

## API

### WebSocket события

#### Клиент -> Сервер
- `init` - инициализация игрока
- `game_action` - игровое действие (ставка, пас, чек)
- `exit_game` - выход из игры

#### Сервер -> Клиент
- `game_state` - обновление состояния игры
- `player_joined` - новый игрок присоединился
- `player_left` - игрок покинул игру
- `error` - ошибка

## Безопасность
- Валидация всех действий на сервере
- Проверка подлинности данных Telegram
- Защита от читеров
- Rate limiting для WebSocket соединений

## Оптимизация
- Кэширование данных на клиенте
- Оптимизация WebSocket сообщений
- Предзагрузка ресурсов
- Минимизация перерисовок

## Лицензия
MIT

## Контакты

- Авторы: Жутяев Иван, Ломовской Артём
- Email: ivan.zhutyaev@mail.ru
- Проект: [https://github.com/IvanZhutyaev/seka-card-game](https://github.com/IvanZhutyaev/seka-card-game)

